<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>3D Квест: Вольтик</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js" crossorigin="anonymous"></script>
    <style>
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;overflow:hidden;background-color:#000}#ui-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:flex;flex-direction:column;justify-content:space-between;z-index:100}#header{background:rgba(41,128,185,.95);color:#fff;padding:15px;text-align:center;font-size:18px;box-shadow:0 4px 10px rgba(0,0,0,.3);text-transform:uppercase;letter-spacing:1px}#score{color:#f1c40f;font-weight:700;font-size:22px}#dialog-box{background:rgba(255,255,255,.95);margin:20px;padding:20px;border-radius:15px;border-left:8px solid #3498db;box-shadow:0 10px 30px rgba(0,0,0,.4);display:none;max-width:500px;margin-left:auto;margin-right:auto;pointer-events:auto}#dialog-title{font-weight:700;color:#2c3e50;font-size:22px;margin-bottom:8px}#dialog-text{font-size:16px;color:#333;line-height:1.5}#end-screen{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(46,204,113,.9);z-index:200;display:none;flex-direction:column;justify-content:center;align-items:center;color:#fff;text-align:center;pointer-events:auto}#end-screen h1{font-size:40px;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}#end-screen p{font-size:20px;max-width:600px}#restart-btn{margin-top:30px;padding:15px 30px;font-size:18px;font-weight:700;background:#fff;color:#27ae60;border:none;border-radius:30px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.2);transition:.2s}#restart-btn:hover{transform:scale(1.05)}.a-canvas{cursor:crosshair!important}
    </style>
    <script>
    const _0x412b=["\x64\x69\x61\x6C\x6F\x67\x2D\x62\x6F\x78","\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x42\x79\x49\x64","\x64\x69\x61\x6C\x6F\x67\x2D\x74\x69\x74\x6C\x65","\x69\x6E\x6E\x65\x72\x48\x54\x4D\x4C","\x64\x69\x61\x6C\x6F\x67\x2D\x74\x65\x78\x74","\x69\x6E\x6E\x65\x72\x54\x65\x78\x74","\x73\x75\x63\x63\x65\x73\x73","\x62\x6F\x72\x64\x65\x72\x4C\x65\x66\x74\x43\x6F\x6C\x6F\x72","\x73\x74\x79\x6C\x65","\x77\x61\x72\x6E\x69\x6E\x67","\x64\x69\x73\x70\x6C\x61\x79","\x62\x6C\x6F\x63\x6B","\x65\x6E\x64\x2D\x73\x63\x72\x65\x65\x6E","\x66\x6C\x65\x78","\x69\x6E\x74\x65\x72\x61\x63\x74\x61\x62\x6C\x65","\x63\x6C\x69\x63\x6B","\x73\x63\x6F\x72\x65"];let fC=0;const tV=5;function sM(t,m,y){const d=document[_0x412b[1]](_0x412b[0]);document[_0x412b[1]](_0x412b[2])[_0x412b[3]]="\u26A1 "+t;document[_0x412b[1]](_0x412b[4])[_0x412b[5]]=m;d[_0x412b[8]][_0x412b[7]]=y===_0x412b[6]?"\x23\x32\x65\x63\x63\x37\x31":y===_0x412b[9]?"\x23\x66\x33\x39\x63\x31\x32":"\x23\x33\x34\x39\x38\x64\x62";d[_0x412b[8]][_0x412b[10]]=_0x412b[11]}function sE(){document[_0x412b[1]](_0x412b[12])[_0x412b[8]][_0x412b[10]]=_0x412b[13]}AFRAME.registerComponent(_0x412b[14],{schema:{isFaulty:{type:"boolean",default:!1},info:{type:"string",default:""},successTitle:{type:"string",default:"\u0418\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E!"},successText:{type:"string",default:""},explanation:{type:"string",default:""}},init:function(){let e=this.el;let d=this.data;this.f=!1;e.addEventListener("\x6D\x6F\x75\x73\x65\x65\x6E\x74\x65\x72",()=>e.setAttribute("\x73\x63\x61\x6C\x65","\x31\x2E\x30\x35\x20\x31\x2E\x30\x35\x20\x31\x2E\x30\x35"));e.addEventListener("\x6D\x6F\x75\x73\x65\x6C\x65\x61\x76\x65",()=>e.setAttribute("\x73\x63\x61\x6C\x65","\x31\x20\x31\x20\x31"));e.addEventListener(_0x412b[15],()=>{if(d.isFaulty){if(!this.f){this.f=!0;e.querySelectorAll("\x2E\x64\x61\x6E\x67\x65\x72\x2D\x65\x66\x66\x65\x63\x74").forEach(x=>x.parentNode.removeChild(x));e.setAttribute("\x61\x6E\x69\x6D\x61\x74\x69\x6F\x6E","\x70\x72\x6F\x70\x65\x72\x74\x79\x3A\x20\x72\x6F\x74\x61\x74\x69\x6F\x6E\x3B\x20\x74\x6F\x3A\x20\x30\x20\x33\x36\x30\x20\x30\x3B\x20\x64\x75\x72\x3A\x20\x36\x30\x30");fC++;document[_0x412b[1]](_0x412b[16])[_0x412b[5]]=fC+"\x2F"+tV;sM(d.successTitle,d.successText,_0x412b[6]);if(fC===tV)setTimeout(sE,1500)}else{sM("\u0412\u043E\u043B\u044C\u0442\u0438\u043A \u043D\u0430\u043F\u043E\u043C\u0438\u043D\u0430\u0435\u0442:",d.explanation,_0x412b[9])}}else{sM("\u0412\u0441\u0451 \u0432 \u043F\u043E\u0440\u044F\u0434\u043A\u0435!",d.info,"\x69\x6E\x66\x6F")}})}});
    </script>
</head>
<body>
    <div id="ui-layer">
        <div id="header">Найди нарушения<br><span style="font-size: 14px; font-weight: normal;">Исправлено: <span id="score">0/5</span></span></div>
        <div id="dialog-box"><div id="dialog-title">Вольтик</div><div id="dialog-text">Привет! Нажимай на предметы.</div></div>
    </div>
    <div id="end-screen">
        <h1>Победа!</h1>
        <p>Ты помог Вольтику обезопасить дом.</p>
        <button id="restart-btn" onclick="location.reload()">Заново</button>
    </div>
    <a-scene cursor="rayOrigin: mouse" background="color: #d1d8e0">
        <a-entity camera look-controls="wasdControlsEnabled: false" position="0 1.6 0"></a-entity>
        <a-plane position="0 0 0" rotation="-90 0 0" width="12" height="12" color="#cf9b76"></a-plane>
        <a-plane position="0 3 -6" width="12" height="6" color="#ecf0f1"></a-plane>
        <a-plane position="-6 3 0" rotation="0 90 0" width="12" height="6" color="#bdc3c7"></a-plane>
        <a-plane position="6 3 0" rotation="0 -90 0" width="12" height="6" color="#bdc3c7"></a-plane>
        <a-plane position="0 3 6" rotation="0 180 0" width="12" height="6" color="#ecf0f1"></a-plane>
        <a-entity position="-3.5 0.5 3" rotation="0 90 0" interactable="info: 'Диван в порядке.'"><a-box position="0 0 0" width="2" height="0.5" depth="1" color="#34495e"></a-box><a-box position="0 0.5 -0.4" width="2" height="0.8" depth="0.2" color="#2c3e50"></a-box></a-entity>
        <a-box position="-4.5 2 -4" width="2" height="4" depth="1" color="#8e44ad" interactable="info: 'Шкаф на месте.'"></a-box>
        <a-entity position="-2 1 -5.9" interactable="isFaulty: true; successTitle: 'Розетка исправлена!'; successText: 'Искры исчезли.'; explanation: 'Искрение ведет к пожару!'"><a-box width="0.3" height="0.3" depth="0.05" color="#ecf0f1"></a-box><a-entity class="danger-effect"><a-sphere position="0 0 0.1" radius="0.08" color="#f1c40f" material="emissive: #f1c40f" animation="property: scale; to: 1.5 1.5 1.5; dir: alternate; dur: 100; loop: true"></a-sphere></a-entity></a-entity>
        <a-entity position="2 0.05 -2" rotation="0 45 0" interactable="isFaulty: true; successTitle: 'Кабель заменен!'; successText: 'Опасный участок убран.'; explanation: 'Оголенные провода смертельны!'"><a-cylinder radius="0.04" height="2" rotation="0 0 90" color="#333"></a-cylinder><a-cylinder class="danger-effect" position="0.3 0 0" radius="0.045" height="0.4" rotation="0 0 90" color="#e74c3c" animation="property: material.color; to: #c0392b; dir: alternate; dur: 300; loop: true"></a-cylinder></a-entity>
        <a-entity position="3.5 0.1 2" interactable="isFaulty: true; successTitle: 'Удлинитель разгружен!'; successText: 'Лишнее отключено.'; explanation: 'Перегрузка плавит провода!'"><a-box class="danger-effect" position="0 0 0" width="0.8" height="0.15" depth="0.3" color="#e67e22"></a-box><a-box position="0 0 0" width="0.75" height="0.14" depth="0.28" color="#ecf0f1"></a-box></a-entity>
        <a-entity position="-4.5 0 0" interactable="isFaulty: true; successTitle: 'Лампа заменена!'; successText: 'Теперь стоит LED.'; explanation: 'Мощные лампы плавят плафоны!'"><a-cylinder position="0 1 0" radius="0.05" height="2" color="#7f8c8d"></a-cylinder><a-cone class="danger-effect" position="0 2 0" radius-bottom="0.4" height="0.6" color="#e74c3c"></a-cone></a-entity>
        <a-entity position="0 0.8 4" rotation="0 45 0" interactable="isFaulty: true; successTitle: 'Утюг выключен!'; successText: 'Пожар предотвращен.'; explanation: 'Не оставляй приборы без присмотра!'"><a-box width="1.5" height="0.05" depth="0.4" color="#bdc3c7"></a-box><a-entity class="danger-effect" position="0.5 0.1 0"><a-sphere radius="0.05" color="#fff" animation="property: position; to: 0 0.5 0; dur: 1000; loop: true"></a-sphere></a-entity></a-entity>
        <a-light type="ambient" color="#fff" intensity="0.7"></a-light>
        <a-light type="point" intensity="0.4" position="0 3 0"></a-light>
    </a-scene>
</body>
</html>
